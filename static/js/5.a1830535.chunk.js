(this.webpackJsonpmarvel=this.webpackJsonpmarvel||[]).push([[5],{41:function(e,t,n){"use strict";var c=n.p+"static/media/error.42292aa1.gif",r=n(2);t.a=function(){return Object(r.jsx)("img",{style:{display:"block",width:"250px",height:"250px",objectFit:"contain",margin:"0 auto"},src:c,alt:"img"})}},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var c=n(4),r=n.n(c),a=n(7),s=n(5),i=n(0),o=0,l=0;t.c=function(){var e=function(){var e=Object(i.useState)("waiting"),t=Object(s.a)(e,2),n=t[0],c=t[1];return{request:Object(i.useCallback)(function(){var e=Object(a.a)(r.a.mark((function e(t){var n,a,s,i,o,l=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",a=l.length>2&&void 0!==l[2]?l[2]:null,s=l.length>3&&void 0!==l[3]?l[3]:{"Content-Type":"application/json"},c("loading"),e.prev=4,e.next=7,fetch(t,{method:n,body:a,headers:s});case 7:if((i=e.sent).ok){e.next=10;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(i.status));case 10:return e.next=12,i.json();case 12:return o=e.sent,e.abrupt("return",o);case 16:throw e.prev=16,e.t0=e.catch(4),c("error"),e.t0;case 20:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),[]),clearError:Object(i.useCallback)((function(){c("loading")}),[]),process:n,setProcess:c}}(),t=e.request,n=e.clearError,c=e.process,u=e.setProcess,h="https://gateway.marvel.com:443/v1/public/",j="apikey=abf1ec76fa94d4d65de0b90e07426344",d=function(){var e=Object(a.a)(r.a.mark((function e(n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(h,"characters?nameStartsWith=").concat(n,"&limit=100&").concat(j));case 2:return c=e.sent,e.abrupt("return",c.data.results.map(v));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(a.a)(r.a.mark((function e(){var n,c,a=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:210,e.next=3,t("".concat(h,"characters?limit=9&offset=").concat(n,"&").concat(j));case 3:return c=e.sent,o=c.data.total,e.abrupt("return",c.data.results.map(v));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(a.a)(r.a.mark((function e(n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(h,"characters/").concat(n,"?").concat(j));case 2:return c=e.sent,e.abrupt("return",v(c.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(a.a)(r.a.mark((function e(n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(h,"characters?name=").concat(n,"&").concat(j));case 2:return c=e.sent,e.abrupt("return",v(c.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(a.a)(r.a.mark((function e(){var n,c,a=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:0,e.next=3,t("".concat(h,"comics?limit=8&offset=").concat(n,"&").concat(j));case 3:return c=e.sent,l=c.data.total,e.abrupt("return",c.data.results.map(x));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(a.a)(r.a.mark((function e(n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(h,"comics/").concat(n,"?").concat(j));case 2:return c=e.sent,e.abrupt("return",x(c.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){var t;return{name:e.title,price:e.prices[0].price,id:e.id,thumbnail:e.images.length>0?e.images[0].path+"."+e.images[0].extension:"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg",homepage:e.urls[0].url,description:e.description,pages:e.pageCount,languages:(null===(t=e.textObjects[0])||void 0===t?void 0:t.language)||"en-US"}},v=function(e){return{name:e.name,description:e.description,thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,id:e.id,comics:e.comics.items,total:e.total}};return{clearError:n,getAllCharacters:m,getOneCharacters:b,getAllComicses:O,getOneComics:p,getOneCharactersByName:f,getAllCharactersClear:d,process:c,setProcess:u}}},45:function(e,t,n){"use strict";var c=n(23),r=n(41),a=(n(47),n(2)),s=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),Object(a.jsxs)("div",{className:"skeleton",children:[Object(a.jsxs)("div",{className:"pulse skeleton__header",children:[Object(a.jsx)("div",{className:"pulse skeleton__circle"}),Object(a.jsx)("div",{className:"pulse skeleton__mini"})]}),Object(a.jsx)("div",{className:"pulse skeleton__block"}),Object(a.jsx)("div",{className:"pulse skeleton__block"}),Object(a.jsx)("div",{className:"pulse skeleton__block"})]})]})})};t.a=function(e,t,n){switch(e){case"waiting":return Object(a.jsx)(s,{});case"loading":return Object(a.jsx)(c.a,{});case"confirmed":return Object(a.jsx)(t,{data:n});case"error":return Object(a.jsx)(r.a,{});default:throw new Error("Unexpected process state")}}},47:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var c=n(5),r=n(0),a=n(46),s=n(42),i=n(23),o=n(41),l=n(45),u=(n(65),n.p+"static/media/mjolnir.61f31e18.png"),h=n(2),j=function(e){var t=e.data,n=t.name,c=t.description,r=t.thumbnail,a=t.homepage,s=t.wiki,i="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===r?"randomchar__img  randomchar__img-contains":"randomchar__img";return Object(h.jsxs)("div",{className:"randomchar__block",children:[Object(h.jsx)("img",{src:r,alt:"Random character",className:i}),Object(h.jsxs)("div",{className:"randomchar__info",children:[Object(h.jsx)("p",{className:"randomchar__name",children:n}),Object(h.jsx)("p",{className:"randomchar__descr",children:c?c.length>130?c.slice(0,130)+"...":c:"No description"}),Object(h.jsxs)("div",{className:"randomchar__btns",children:[Object(h.jsx)("a",{href:a,className:"button button__main",children:Object(h.jsx)("div",{className:"inner",children:"homepage"})}),Object(h.jsx)("a",{href:s,className:"button button__secondary",children:Object(h.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})},d=function(){var e=Object(r.useState)({}),t=Object(c.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){O()}),[]);var i=Object(s.c)(),o=(i.loading,i.error,i.getOneCharacters),d=i.clearError,m=i.process,b=i.setProcess,f=function(e){a((function(t){return e}))},O=function(){d();var e=Math.floor(400*Math.random()+1011e3);o(e).then(f).then((function(){return b("confirmed")}))};return Object(h.jsxs)("div",{className:"randomchar",children:[Object(l.a)(m,j,n),Object(h.jsxs)("div",{className:"randomchar__static",children:[Object(h.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",Object(h.jsx)("br",{}),"Do you want to get to know him better?"]}),Object(h.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),Object(h.jsx)("button",{className:"button button__main",onClick:O,children:Object(h.jsx)("div",{className:"inner",children:"try it"})}),Object(h.jsx)("img",{src:u,alt:"mjolnir",className:"randomchar__decoration"})]})]})},m=n(8),b=(n(66),n(44)),f=n.n(b),O=n(85),p=n(86),x=function(e){var t=Object(r.useState)([]),n=Object(c.a)(t,2),a=n[0],l=n[1],u=Object(r.useState)(!1),j=Object(c.a)(u,2),d=j[0],b=j[1],f=Object(r.useState)(1500),x=Object(c.a)(f,2),v=x[0],_=x[1],g=Object(r.useState)(!1),N=Object(c.a)(g,2),k=N[0],y=N[1],C=Object(s.c)(),w=(C.loading,C.error,C.getAllCharacters),S=C.process,E=C.setProcess;Object(r.useEffect)((function(){F(!0)}),[]);var F=function(e){b(!e),w(v).then(P).then((function(){return E("confirmed")}))},P=function(e){var t=s.a-v<=9;l((function(t){return[].concat(Object(m.a)(t),Object(m.a)(e))})),b((function(e){return!1})),_((function(e){return e+9})),y((function(e){return t}))},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;console.log("\u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u043d\u043e\u043c\u0435\u0440: "+e),R.current[e].classList.add("char__item_selected"),R.current[e].focus()},I=function(e){R.current[e].classList.remove("char__item_selected")},R=Object(r.useRef)([]);function T(t){var n=t.map((function(t,n){var c=t.name,r=t.thumbnail,s=t.id,i="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===r?"unset":"cover";return Object(h.jsx)(O.a,{timeout:300+1e3*Math.random(),classNames:"char__item",children:Object(h.jsxs)("li",{tabIndex:n,className:"char__item",ref:function(e){return R.current[n]=e},onBlur:function(){return I(n)},onFocus:function(){return A(n)},onClick:function(){return e.onCharSelected(s)},onKeyDown:function(t){return function(t,n,c){console.log("\u0414\u043b\u0438\u043d\u0430 \u043c\u0430\u0441\u0441\u0438\u0432\u0430: "+a.length),"Enter"===t.key&&e.onCharSelected(c),"ArrowDown"===t.key&&(a.length-n-1>=3?(A(n+3),I(n)):(I(n),A(a.length-1))),"ArrowUp"===t.key&&(n<3?(I(n),A(0)):(I(n),A(n-3))),"ArrowLeft"===t.key&&(0===n?(I(n),A(0)):(I(n),A(n-1))),"ArrowRight"===t.key&&(a.length-n-1>=1?(A(n+1),I(n)):(I(n),A(a.length-1)))}(t,n,s)},children:[Object(h.jsx)("img",{src:r,alt:c,style:{objectFit:"".concat(i)}}),Object(h.jsx)("div",{className:"char__name",children:c})]},s)},n)}));return Object(h.jsx)("ul",{className:"char__grid",children:Object(h.jsx)(p.a,{component:null,children:n})})}var M=Object(r.useMemo)((function(){return function(e,t,n){switch(e){case"waiting":return Object(h.jsx)(i.a,{});case"loading":return n?Object(h.jsx)(t,{}):Object(h.jsx)(i.a,{});case"confirmed":return Object(h.jsx)(t,{});case"error":return Object(h.jsx)(o.a,{});default:throw new Error("Unexpected process state")}}(S,(function(){return T(a)}),d)}),[S]);return Object(h.jsxs)("div",{className:"char__list",children:[M,Object(h.jsx)("button",{className:"button button__main button__long",disabled:d,style:{display:k?"none":"block"},onClick:function(){return F()},children:Object(h.jsx)("div",{className:"inner",children:"load more"})})]})};x.protoTypes={onCharSelected:f.a.func.isRequired};var v=x,_=n(11),g=(n(67),function(e){var t,n=e.data,c=n.name,r=n.description,a=n.thumbnail,s=n.homepage,i=n.wiki,o=n.comics;t=o.length>0?o.slice(0,10).map((function(e,t){return Object(h.jsxs)("li",{className:"char__comics-item",children:[Object(h.jsx)(_.c,{end:!0,to:"/comics/".concat(e.resourceURI.substr(e.resourceURI.lastIndexOf("/")+1)),children:e.name}),e.name]},t)})):"No comics";var l="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===a?"unset":"cover";return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"char__basics",children:[Object(h.jsx)("img",{src:a,alt:c,style:{objectFit:"".concat(l)}}),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"char__info-name",children:c}),Object(h.jsxs)("div",{className:"char__btns",children:[Object(h.jsx)("a",{href:s,className:"button button__main",children:Object(h.jsx)("div",{className:"inner",children:"homepage"})}),Object(h.jsx)("a",{href:i,className:"button button__secondary",children:Object(h.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),Object(h.jsx)("div",{className:"char__descr",children:r?r.length>500?r.slice(0,500)+"...":r:"No description"}),Object(h.jsx)("div",{className:"char__comics",children:"Comics:"}),Object(h.jsx)("ul",{className:"char__comics-list",children:t})]})}),N=function(e){var t=Object(r.useState)(null),n=Object(c.a)(t,2),a=n[0],i=n[1],o=Object(s.c)(),u=(o.loading,o.error,o.getOneCharacters),j=o.clearError,d=o.process,m=o.setProcess;Object(r.useEffect)((function(){f()}),[e.charId]);var b=function(e){i((function(t){return e}))},f=function(){var t=e.charId;t&&(j(),u(t).then(b).then((function(){return m("confirmed")})))};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"char__info",children:Object(l.a)(d,g,a)})})},k=n(12),y=n(14),C=n(15),w=n(17),S=function(e){Object(C.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(k.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={error:!1},e}return Object(y.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log(e,t),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?Object(h.jsx)(o.a,{}):this.props.children}}]),n}(r.Component),E=n(81),F=n(82),P=(n(77),function(){var e=Object(s.c)(),t=e.getOneCharactersByName,n=e.process,a=e.setProcess,i=Object(r.useState)(null),o=Object(c.a)(i,2),l=o[0],u=o[1];return Object(h.jsx)(E.d,{initialValues:{name:""},validationSchema:F.a({name:F.b().min(3,"Please, enter minimum three chars").required("Please, enter name of your character")}),onSubmit:function(e){return t(e.name).then((function(e){return t=e,void u((function(e){return t}));var t})).then((function(){return a("confirmed")})).catch((function(){return u("Not found")}))},children:Object(h.jsxs)(E.c,{className:"searchChar",children:[Object(h.jsx)("h2",{className:"searchChar__header",children:"Or find your character by name:"}),Object(h.jsxs)("div",{className:"searchChar__inputBtn",children:[Object(h.jsxs)("div",{className:"searchChar__input",children:[Object(h.jsx)(E.b,{id:"name",name:"name",type:"text",placeholder:"Enter name"}),Object(h.jsx)(E.a,{className:"error",name:"name",component:"div"})]}),Object(h.jsx)("button",{className:"button button__main",type:"submit",disabled:"loading"===n,children:Object(h.jsx)("div",{className:"inner",children:"Find"})})]}),null===l?null:"Not found"===l?Object(h.jsx)("div",{className:"searchChar__title",children:Object(h.jsx)("h2",{className:"searchChar__title_error",children:"The charapter not found. Check the name and try again"})}):Object(h.jsxs)("div",{className:"searchChar__title",children:[Object(h.jsxs)("h2",{className:"searchChar__title_done",children:["There is! Visit ",l.name," page?"]}),Object(h.jsx)(_.c,{end:!0,to:"/character/".concat(l.id),children:Object(h.jsx)("button",{className:"button button__main",children:Object(h.jsx)("div",{className:"inner",children:"To page"})})})]})]})})}),A=(n(78),function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)({}),o=Object(c.a)(i,2),l=o[0],u=o[1],j=Object(s.c)(),d=j.loading,m=j.error,b=j.getAllCharactersClear;Object(r.useEffect)((function(){f(n)}),[n]);var f=function(e){e&&b(e).then((function(e){return u(e)}))},O=function(e){if(e.length){var t=e.map((function(e,t){var n=e.name,c=e.thumbnail,r=e.id;return Object(h.jsxs)(_.c,{className:"findChar__wrapper",end:!0,to:"/character/".concat(r),children:[Object(h.jsx)("img",{src:c,alt:n,className:"findChar__img"}),Object(h.jsx)("div",{className:"findChar__name",children:n})]},t)}));return Object(h.jsx)(h.Fragment,{children:t})}}(l);return Object(h.jsx)("div",{className:"findChar",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"findChar__list",children:[Object(h.jsx)("input",{value:n,type:"text",onChange:function(e){return a(e.target.value)},onBlur:function(){return setTimeout((function(){return a("")}),150)},placeholder:"Find your hero there..."}),0===n.length?null:Object(h.jsx)("div",{className:"findChar__result",children:m?"Error! Please, try again...":d?"loading...":O||"No found this character"})]})})})}),I=n.p+"static/media/vision.067d4ae1.png";t.default=function(){var e=Object(r.useState)(null),t=Object(c.a)(e,2),n=t[0],s=t[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(a.a,{children:["        ",Object(h.jsx)("meta",{name:"description",content:"Marvel information portal"}),Object(h.jsx)("title",{children:"Marvel information portal"})]}),Object(h.jsx)(S,{children:Object(h.jsx)(d,{})}),Object(h.jsx)(S,{children:Object(h.jsx)(A,{})}),Object(h.jsxs)("div",{className:"char__content",children:[Object(h.jsx)(S,{children:Object(h.jsx)(v,{onCharSelected:function(e){s(e)}})}),Object(h.jsxs)("div",{className:"char__stick",children:[Object(h.jsx)(S,{children:Object(h.jsx)(N,{charId:n})}),Object(h.jsx)(S,{children:Object(h.jsx)(P,{})})]})]}),Object(h.jsx)("img",{className:"bg-decoration",src:I,alt:"vision"})]})}}}]);
//# sourceMappingURL=5.a1830535.chunk.js.map